<body>
<script>
const MAX_PARTS = 100; // Số file tối đa cần thử
const code = window.location.pathname.substring(1);

async function findAndRedirect() {
  for (let i = 1; i <= MAX_PARTS; i++) {
    try {
      const resp = await fetch(`/data/data_part${i}.json`);
      if (!resp.ok) continue;

      const links = await resp.json();
      const match = links.find(l => l.short === code);

      if (match) {
        window.location.href = match.original;
        return;
      }
    } catch (e) {
      continue;
    }
  }

  document.body.innerHTML = "<h1>404 - Link not found</h1>";
}

findAndRedirect();
</script>
</body>
