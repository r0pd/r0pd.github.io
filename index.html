<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Link Rút Gọn</title>
<link rel="icon" type="image/png" href="./img/logo.png" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="/src/styles.css">
</head>
<body>

  <div id="login-container">
    <div class="login-box">
      <h1><i class="fa fa-lock" style="color:var(--accent-2)"></i>&nbsp; Admin</h1>
      <input id="adminEmail" class="input" placeholder="Email" />
      <input id="adminPass" class="input" type="password" placeholder="Mật khẩu" />
      <button class="btn" id="loginBtn">Đăng nhập</button>
      <p id="loginError"></p>
    </div>
  </div>

  <div id="main-container" style="display:none;">
    <div class="wrap">
      <header>
        <div class="logo"><i class="fa fa-link" style="color:#fff"></i></div>
        <div><h1>Link Rút Gọn</h1></div>
      </header>

      <div class="auth-bar">
        <span id="authStatus" class="auth-status"></span>
        <button class="btn ghost" id="logoutBtn">Đăng xuất</button>
      </div>

      <div class="top-row">
        <div class="controls">
          <button class="btn warn" id="showDataBtn"><i class="fa fa-database"></i>&nbsp; Data</button>
          <label class="file-label" for="importFiles"><i class="fa fa-file-import"></i>&nbsp; Nhập</label>
          <input type="file" id="importFiles" accept=".json" multiple style="display:none">
          <button class="btn" id="exportBtn"><i class="fa fa-file-export"></i>&nbsp; Xuất</button>
        </div>
      </div>
      <span id="fileName">&ensp;</span>

      <div class="create-container">
        <div class="create-form">
            <div class="input-group">
                <div class="input-row">
                    <i class="fa fa-link form-icon"></i>
                    <input id="originalInput" class="input" placeholder="Dán link gốc của bạn vào đây..."/>
                </div>
                <div class="dual-input-row">
                    <div class="input-row">
                        <i class="fa fa-pencil-alt form-icon" style="color: var(--muted);"></i>
                        <span id="domainPrefix" class="domain-prefix"></span>
                        <input id="customAliasInput" class="input" placeholder="...mã tùy chỉnh"/>
                    </div>
                    <div class="input-row">
                        <i class="fa fa-tag form-icon" style="color: var(--muted);"></i>
                        <input id="titleInput" class="input" placeholder="...thêm tiêu đề"/>
                    </div>
                </div>
            </div>
            <button id="createBtn" class="btn">
                <span class="btn-text">Tạo Link</span>&nbsp;<i class="fa fa-magic btn-icon"></i>
            </button>
        </div>
      </div>
      <div class="info-search-bar">
        <div id="infoLine" style="color:var(--muted);font-size:15px"></div>
        <div class="search-wrap">
          <input id="searchInput" class="search-input" placeholder="Tìm kiếm mã, link hoặc tiêu đề..." />
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th style="width:11%">Rút gọn</th>
            <th style="width:11%">Tiêu đề</th>
            <th>Link gốc</th>
            <th style="width:140px; text-align:right;">Hành động</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
      <div class="pagination" id="pagination"></div>

      <div id="importedFilesList"></div>
      <div id="deleteCandidates"></div>
    </div>
  </div>

  <div id="dataPopup" class="popup-overlay">
    <div class="popup-box data-popup">
      <div class="data-header">
        <strong>Dữ liệu (JSON)</strong>
        <div>
          <button id="copyDataBtn" class="copy-btn" title="Copy toàn bộ dữ liệu"><i class="fa fa-copy"></i></button>
          <button class="close-btn" id="closeDataPopup">&times;</button>
        </div>
      </div>
      <textarea id="dataTextarea" class="data-textarea"></textarea>
      <div style="margin-top:6px; text-align:left; color:var(--muted)">
        <small>Gợi ý: bạn có thể chỉnh JSON thủ công rồi Lưu thay đổi (sẽ ghi vào Firestore).</small>
      </div>
      <div style="margin-top:6px; text-align:right;">
        <button id="saveDataBtn" class="btn warn"><i class="fa fa-save"></i> Lưu thay đổi</button>
      </div>
    </div>
  </div>

  <div id="confirmPopup" class="popup-overlay">
    <div class="popup-box" style="max-width:320px;">
      <div style="margin-bottom:16px;font-size:20px;">Bạn có chắc muốn xóa mục này?</div>
      <div style="display:flex;gap:10px;justify-content:center;">
        <button id="confirmYes" class="btn danger">Xóa</button>
        <button id="confirmNo" class="btn ghost">Hủy</button>
      </div>
    </div>
  </div>

<script type="module" src="/src/script.js"></script>
</body>
</html>